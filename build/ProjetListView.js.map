{"version":3,"file":"ProjetListView.js","names":["renderProjectThumbnail","data","ProjetListView","element","_this","_classCallCheck","_defineProperty","searchForm","querySelector","addEventListener","event","handleSearchFormSubmit","innerHTML","setTypes","_createClass","key","value","renderProjectList","types","arguments","length","undefined","search","ordering","sortingFunction","a","b","date","localeCompare","html","filter","project","title","toLowerCase","includes","type","sort","forEach","preventDefault","searchInput","orderingSelect","typesSelect","renderGameList","_this2","listTypes","typesString","split","renderTypeOption","concat","default"],"sources":["../js/ProjetListView.js"],"sourcesContent":["import renderProjectThumbnail from \"./renderProjectThumbnail.js\";\r\nimport data from \"./data.js\";\r\n\r\nexport default class ProjetListView {\r\n    searchForm;\r\n    element;\r\n\r\n    constructor(element){\r\n        this.element = element;\r\n        // détection de la soumission du formulaire de recherche\r\n\t\tthis.searchForm = this.element.querySelector('.searchForm');\r\n\t\tthis.searchForm.addEventListener('submit', event =>\r\n\t\t\tthis.handleSearchFormSubmit(event)\r\n\t\t);\r\n\r\n        // ajout de la liste des types dans l'html\r\n        this.searchForm.querySelector(\"#select_types\").innerHTML = this.setTypes();\r\n    }\r\n\r\n    renderProjectList(types = '', search = '', ordering) {\r\n\t\t// calcul de la fonction de tri selon le paramètre ordering\r\n\t\tlet sortingFunction;\r\n\t\tif (ordering == '-date'){\r\n\t\t\tsortingFunction = (a, b) => b.date.localeCompare(a.date);\r\n        }\r\n\r\n\t\t// parcours du tableau + génération du code HTML de la projectList\r\n\t\tlet html = '';\r\n\t\tdata\r\n\t\t\t.filter(project => project.title.toLowerCase().includes(search.toLowerCase())) // recherche\r\n            .filter(project => project.type.toLowerCase().includes(types.toLowerCase())) // type\r\n\t\t\t.sort(sortingFunction) // tri\r\n\t\t\t.forEach(project => (html += renderProjectThumbnail(project))); // génération du HTML\r\n\t\t// maj de la page HTML\r\n\t\tthis.element.querySelector('.results_projects').innerHTML = html;\r\n\t}\r\n\r\n    handleSearchFormSubmit(event) {\r\n\t\tevent.preventDefault();\r\n\t\tconst searchInput = this.searchForm.querySelector('[name=search]'),\r\n\t\t\torderingSelect = this.searchForm.querySelector('[name=ordering]'),\r\n            typesSelect = this.searchForm.querySelector('[name=types]');\r\n\t\tthis.renderGameList(typesSelect.value, searchInput.value, orderingSelect.value);\r\n\t}\r\n\r\n    setTypes(){\r\n        let listTypes = '';\r\n        data.forEach(project => {\r\n            // récupération de tout les types d'un projet\r\n            const typesString = project.type.split(' ');\r\n            typesString.forEach(type => {\r\n                // ajoute si n'existe pas\r\n                if(!listTypes.toLowerCase().includes(type.toLowerCase())){\r\n                    listTypes = listTypes + \" \" + type;\r\n                }\r\n            });\r\n        });\r\n\r\n        // Creation de l'html\r\n        return listTypes.split(\" \").forEach(type => this.renderTypeOption(type));\r\n    }\r\n\r\n    renderTypeOption(type){\r\n        return `\r\n        <option value=\"${type}\">${type}</option>\r\n        `;\r\n    }\r\n}\r\n"],"mappings":"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"}